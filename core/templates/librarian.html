{% extends "base.html" %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
{% block title %}Librarian Dashboard{% endblock %}

{% block content %}
  <!-- Extra CSS for uniform button sizing and spacing -->
  <style>
    /* Ensures all buttons have the same minimum width */
    .btn-same-size {
      min-width: 160px;
    }
    
    /* Custom container for the buttons with extra spacing */
    .btn-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
    }
    
    /* Apply margin to each button for additional space */
    .btn-container a {
      margin: 0.5rem 1rem; /* 0.5rem vertical, 1rem horizontal margin */
    }
  </style>

  <h1 class="mb-4">Welcome, Librarian {{ profile.user.get_full_name }}!</h1>

  <div class="container-fluid content-wrapper">
    <div class="row">
      <!-- Left column: profile picture, name, etc. -->
      <div class="col-md-4 col-lg-4 text-center p-4 border-end">
        {% if profile.profile_picture %}
          <img src="{{ profile.profile_picture.url }}" 
               alt="Profile Picture" 
               class="img-thumbnail rounded-circle mb-3" 
               width="150">
        {% else %}
          <p>No image</p>
        {% endif %}
        
        <p>
          <a href="{% url 'core:upload_profile_picture' %}" 
             class="btn btn-primary" role="button">
            Change Profile Picture
          </a>
        </p>
        
        <p class="text-muted">Your email: {{ profile.user.email }}</p>
        <p class="text-muted">Joined: {{ profile.joined_date }}</p>
      </div>
      
      <!-- Right column: buttons and equipment table -->
      <div class="col-md-8 col-lg-8 p-4">
        <!-- Container for buttons with custom spacing -->
        <div class="btn-container">
          <a href="{% url 'core:catalog' %}" class="btn btn-primary btn-lg btn-same-size">
            Browse Catalog
          </a>
          <a href="{% url 'core:catalog' %}" class="btn btn-primary btn-lg btn-same-size">
            Manage Catalog
          </a>
          <a href="{% url 'core:add_collection' %}" class="btn btn-primary btn-lg btn-same-size">
            Add Collection
          </a>
          <a href="{% url 'core:my_collections' %}" class="btn btn-primary btn-lg btn-same-size">
            View Your Collections
          </a>
        </div>
        
        <h2 class="mt-4">Equipment You're Currently Renting</h2>
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Name</th>
              <th>Condition</th>
            </tr>
          </thead>
          <tbody>
            {% for equipment in equipment_list %}
              <tr>
                <td>{{ equipment.name }}</td>
                <td>{{ equipment.condition }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
        
      </div>
      
    </div>
  </div>
  
{% endblock %}
