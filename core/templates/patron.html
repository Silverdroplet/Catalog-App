{% extends "base.html" %}

{% block title %}Patron Dashboard{% endblock %}

{% block content %}
<h1 class="mb-4">Welcome, {{ profile.user.get_full_name }}!</h1>

  <div class="container-fluid mt-4">
    <div class = "row">

      <!--Left column: Contains the profile picture, name, and joined date-->
      <div class="col-md-4 col-lg-4 text-center p-4 border-end">
            <!--profile picture-->
        {% if profile.profile_picture %}
        <img src="{{ profile.profile_picture.url }}" alt="Profile Picture" class="img-thumbnail rounded-circle mb-3" width="150">
        {% else %}
          <div class="border rounded-circle bg-light d-flex align-items-center justify-content-center" style="width: 150px; height: 150px;">
            <span class="text-muted">No Image</span>
          </div>
        {% endif %}
        
        <p>
          <a href="{% url 'core:upload_profile_picture' %}" class="btn btn-warning btn-sm mt-2">
            Change Profile Picture
          </a>
        </p>
        
        <h3 class="mt-3">{{ profile.user.get_full_name }}</h3>
        <p class="text-muted">Your email: {{ profile.user.email }}</p>
        <p class="text-muted">Joined: {{ profile.joined_date }}</p>
      </div>

      <!--Right column: buttons-->
      <div class="col-md-8 col-lg-8 p-4 d-flex flex-column justify-content-center align-items-center">
          <a href="{% url 'core:catalog' %}" class="btn btn-primary btn-lg w-75 mb-3">
          Browse Catalog
        </a>
        <form action="{% url 'core:logout' %}" method="post" class="w-75">
          {% csrf_token %}
          <button type="submit" class="btn btn-danger btn-lg w-100">Logout</button>
        </form>
      </div>

    </div>
  </div>


{% endblock %}
